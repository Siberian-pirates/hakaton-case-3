# Веб-сервис для карьерного трекинга вакансий

## Описание требований

Сервис предназначен для работодателей (Админов) и соискателей (Клиентов):

- **Работодатели (Админы)**:

  - Создают вакансии
  - Просматривают отклики на вакансии от соискателей
  - Получают уведомления в Telegram о новых откликах, могут просматривать отклики в Telegram

- **Соискатели (Клиенты)**:
  - Просматривают открытые вакансии
  - Оставляют заявку с указанием контактных данных (возможно — Telegram user_name)
  - Получают уведомления в Telegram о статусе рассмотрения заявки
  - Получают уведомления по email при изменении статуса заявки

### Требования к интеграциям

- Telegram-бот для уведомлений:
  - Отправляет сообщения кандидатам о смене статуса заявки
  - Уведомляет работодателей об откликах, отправляет детали откликов
- Email-уведомления кандидатам по смене статуса заявки

---

## Архитектура backend в Next.js

Серверные функции реализуются в виде endpoint'ов в папке `/app/api/`. Они доступны клиентской/серверной стороне через fetch или серверные компоненты. Основная бизнес-логика и интеграции выделяются в отдельные модули внутри папки `/projects/backend/lib`.

### Роуты

- `/app/api/vacancies/` — работа с вакансиями
- `/app/api/applicants/` — работа с заявками (откликами)
- `/app/api/employers/` — работа с работодателями

### Вспомогательные модули

- `/projects/backend/lib/prisma.ts` — подключение ORM (Prisma)
- `/projects/backend/lib/telegram.ts` — Telegram Bot API
- `/projects/backend/lib/mailer.ts` — Email-рассылка

### Где хранятся модели:

Вся схема БД в `/projects/backend/prisma/schema.prisma`. Миграции через инструмент Prisma.

---

## План с учётом Next.js

1. ✅ Создать эндпоинты в соотвесвии с Админ роутами и Клиент (сайт)
2. ✅ Описать модели в prisma/schema.prisma
3. ✅ Создать модуль Prisma в `/projects/backend/lib/prisma.ts`
4. ⏳ Создать заготовки роутов для CRUD-функций
5. ⏳ Реализовать шаблоны интеграции с Telegram и Email (отдельные модули)
6. ✅ Описать типы, схемы, валидацию (zod)
7. ⏳ Документировать API-роуты и архитектуру

---

## Выполненные задачи

### ✅ Prisma схема создана

- Модель `Employer` - работодатели с авторизацией
- Модель `Vacancy` - вакансии
- Модель `Tag` - теги/скилы для фильтрации
- Модель `VacancyTag` - связь many-to-many между вакансиями и тегами
- Модель `Applicant` - отклики соискателей (без авторизации)
- Enum `ApplicationStatus` - статусы заявок (PENDING, REVIEWED, ACCEPTED, REJECTED)

### ✅ Prisma Client настроен

- Создан модуль `/projects/backend/lib/prisma.ts`
- Настроена работа с hot-reload в Next.js

### ✅ Типы и валидация

- Создан модуль `/projects/backend/lib/types.ts`
- Zod схемы для валидации входных данных
- TypeScript типы для работы с API

### ✅ Инструкции по установке

- Создан файл `/projects/backend/SETUP.md` с подробными инструкциями
- Добавлены npm скрипты для работы с Prisma

---

## Следующие шаги

1. Установить Prisma: `npm install @prisma/client && npm install -D prisma`
2. Создать файл `.env` с настройками БД (см. SETUP.md)
3. Запустить миграцию: `npm run prisma:migrate`
4. Реализовать CRUD endpoints для всех моделей
5. Реализовать интеграции с Telegram и Email
